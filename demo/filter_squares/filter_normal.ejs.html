<!DOCTYPE html>
<html lang="en">
	<head>
		<title>cjs</title>
		<%- include(cjs_inc.main) %>
		<script type="text/javascript" src="../jquery.js"></script>
		<script type="text/javascript">
			window.onload = function() {
				var num_squares = 3600;
				var filter_colors_dom = $("#colors");
				var colors = ["#E83A25", "#FFE9A3", "#98CC96", "#004563", "#786137"];
				colors.map(function(color_code, color_index) {
									var dom_elem = $("<div />");
									var state = "idle";
									var set_state = function(state_name) {
										state = state_name;
										dom_elem.attr("class", state_name);
										$("div.color"+color_index).attr("class", state_name + " color"+color_index);
									};
									dom_elem.on("mouseover", function() {
										if(state === "idle") {
											set_state("hover");
										}
									});
									dom_elem.on("mouseout", function() {
										if(state === "hover") {
											set_state("idle");
										}
									});
									dom_elem.on("mousedown", function() {
										if(state === "hover") {
											set_state("selected");
										}
										else if(state === "selected") {
											set_state("hover");
										}
									});
									dom_elem.css("background-color", color_code);
									filter_colors_dom.append(dom_elem);
									set_state("idle");
								});


				var items_dom = $("#items");


				for(var i = 0; i<num_squares; i++) {
					var div_elem = $("<div />");

					var random_index = Math.floor(Math.random() * colors.length);
					var color = colors[random_index];
					div_elem.css("background-color", color);
					div_elem.attr("class", "idle color"+random_index);
					items_dom.append(div_elem);
				}
			};
		</script>
		<style type="text/css">
			body {
				background-color: #111;
				margin-top: 50px;
			}
			div#container {
				margin: auto;
				width: 720px;
				position: relative;
				overflow: hidden;
			}


			div#items {
				padding-top: 50px;
				margin-top: 40px;
				border-top: 1px solid #444;
			}

			div#items > div {
				width: 100px;
				height: 100px;
				float: left;
				margin-left: 10px;
				margin-right: 10px;
				margin-bottom: 20px;
			}

			div#items > div.idle {
				opacity: 0.2;
			}
			div#items > div.hover {
				opacity: 0.5;
			}
			div#items > div.selected {
				opacity: 1.0;
			}

			span#colors > div {
				width: 40px;
				height: 40px;
				margin-left: 10px;
				float: right;
			}
			span#colors > div.idle {
				opacity: 0.7;
				border: 1px solid black;
			}
			span#colors > div.hover {
				opacity: 0.9;
				border: 1px solid black;
			}
			span#colors > div.selected {
				opacity: 1.0;
				border: 1px solid white;
			}

			div#filter {
				color: white;
				text-align: right;
				font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
				font-weight: 200;
				font-size: 1.7em;
			}
		</style>
	</head>
	<body>
		<div id="container">
			<div id="filter">Filter: <span id="colors"></span></div>
			<div id="items"></div>
		</div>
	</body>
</html>
