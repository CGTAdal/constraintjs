<!DOCTYPE html>
<html lang="en">
	<head>
		<title>cjs</title>
		<%- include(cjs_inc.main) %>
		<script type="text/javascript">
			window.onload = function() {
				function decimalToHexString(number) {
					var rv = number.toString(16).toUpperCase();
					if(rv.length < 2) {
						rv = "0"+rv;
					}
					return rv;
				}
				var random_num = function(min, max) {
					var range = max-min;
					return min + Math.random() * range;
				};
				var num_squares = 2;

				var items_dom = document.getElementById("items");

				var get_color_constraint = function() {
					var start = random_num(85, 170);
					var variance = random_num(-85, 85);
					var speed_mul = 1/1000;
					return cjs(function() {
						//return decimalToHexString(Math.round(start + variance * Math.sin(speed_mul * cjs.time.get())));
						return Math.floor(start + variance * Math.sin(speed_mul * cjs.time.get()));
					});
				};

				cjs._.times(num_squares, function() {
					var div_elem = document.createElement("div");
					div_elem.className = "filterable_rect";

					var r = get_color_constraint();
					var g = get_color_constraint();
					var b = get_color_constraint();

					var hex = cjs(function() {
						return "rgb("+r.get()+","+g.get()+","+b.get()+")";
					});

					cjs.binding.css(div_elem, "background-color", hex, 30);
					items_dom.appendChild(div_elem);
				});
			};
		</script>
		<style type="text/css">
			body {
				background-color: #111;
				margin-top: 50px;
			}
			div#container {
				margin: auto;
				width: 720px;
				position: relative;
				overflow: hidden;
			}


			div#items {
				padding-top: 50px;
			}

			div#items > div {
				width: 100px;
				height: 100px;
				float: left;
				margin-left: 10px;
				margin-right: 10px;
				margin-bottom: 20px;
			}

			div#items > div.idle {
				opacity: 0.2;
			}
			div#items > div.hover {
				opacity: 0.5;
			}
			div#items > div.selected {
				opacity: 1.0;
			}

			span#colors > div {
				width: 40px;
				height: 40px;
				margin-left: 10px;
				float: right;
			}
			span#colors > div.idle {
				opacity: 0.7;
				border: 1px solid black;
			}
			span#colors > div.hover {
				opacity: 0.9;
				border: 1px solid black;
			}
			span#colors > div.selected {
				opacity: 1.0;
				border: 1px solid white;
			}

			div#filter {
				color: white;
				text-align: right;
				font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
				font-weight: 200;
				font-size: 1.7em;
			}
		</style>
	</head>
	<body>
		<div id="container">
			<div id="items"></div>
		</div>
	</body>
</html>
